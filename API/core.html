

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>emc2.core (emc2.core) &mdash; EMC^2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
      <script src="../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../_static/doctools.js?v=9a2dae69"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="emc2.core.instruments.KAZR" href="generated/emc2.core.instruments.KAZR.html" />
    <link rel="prev" title="API Reference" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            EMC^2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">EMC^2 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">EMC^2 Usage guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../EMC2example.html"><em>EMC²</em> Demo Notebook</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">emc2.core (emc2.core)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.KAZR.html">emc2.core.instruments.KAZR</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.HSRL.html">emc2.core.instruments.HSRL</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.CSAPR.html">emc2.core.instruments.CSAPR</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.NEXRAD.html">emc2.core.instruments.NEXRAD</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.XSACR.html">emc2.core.instruments.XSACR</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.instruments.Ten64nm.html">emc2.core.instruments.Ten64nm</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.ModelE.html">emc2.core.model.ModelE</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.TestModel.html">emc2.core.model.TestModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.DHARMA.html">emc2.core.model.DHARMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.WRF.html">emc2.core.model.WRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.TestConvection.html">emc2.core.model.TestConvection</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.TestAllStratiform.html">emc2.core.model.TestAllStratiform</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.TestHalfAndHalf.html">emc2.core.model.TestHalfAndHalf</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.model.TestModel.html">emc2.core.model.TestModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.Instrument.html">emc2.core.Instrument</a></li>
<li class="toctree-l3"><a class="reference internal" href="generated/emc2.core.Model.html">emc2.core.Model</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#emc2.core.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.check_and_stack_time_lat_lon"><code class="docutils literal notranslate"><span class="pre">Model.check_and_stack_time_lat_lon()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.finalize_subcol_fields"><code class="docutils literal notranslate"><span class="pre">Model.finalize_subcol_fields()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.hydrometeor_classes"><code class="docutils literal notranslate"><span class="pre">Model.hydrometeor_classes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.load_subcolumns_from_netcdf"><code class="docutils literal notranslate"><span class="pre">Model.load_subcolumns_from_netcdf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.num_hydrometeor_classes"><code class="docutils literal notranslate"><span class="pre">Model.num_hydrometeor_classes</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.num_subcolumns"><code class="docutils literal notranslate"><span class="pre">Model.num_subcolumns</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.permute_dims_for_processing"><code class="docutils literal notranslate"><span class="pre">Model.permute_dims_for_processing()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.remove_appended_str"><code class="docutils literal notranslate"><span class="pre">Model.remove_appended_str()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.remove_subcol_fields"><code class="docutils literal notranslate"><span class="pre">Model.remove_subcol_fields()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.subcolumns_to_netcdf"><code class="docutils literal notranslate"><span class="pre">Model.subcolumns_to_netcdf()</span></code></a></li>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Model.unstack_time_lat_lon"><code class="docutils literal notranslate"><span class="pre">Model.unstack_time_lat_lon()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#emc2.core.Instrument"><code class="docutils literal notranslate"><span class="pre">Instrument</span></code></a><ul>
<li class="toctree-l3"><a class="reference internal" href="#emc2.core.Instrument.read_arm_netcdf_file"><code class="docutils literal notranslate"><span class="pre">Instrument.read_arm_netcdf_file()</span></code></a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="io.html">emc2.io (emc2.io)</a></li>
<li class="toctree-l2"><a class="reference internal" href="simulator.html">emc2.simulator (emc2.simulator)</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html">emc2.plotting (emc2.plotting)</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotting.html#emc2.plotting.SubcolumnDisplay"><code class="docutils literal notranslate"><span class="pre">SubcolumnDisplay</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">EMC^2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">API Reference</a></li>
      <li class="breadcrumb-item active">emc2.core (emc2.core)</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/API/core.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="emc2-core-emc2-core">
<span id="module-emc2.core"></span><h1>emc2.core (emc2.core)<a class="headerlink" href="#emc2-core-emc2-core" title="Link to this heading">¶</a></h1>
<p>The procedures in this module contain the core data structures of EMC^2.
In particular, the Instrument class that describes the characteristics
of the instrument to be simulated is stored here. In addition, global
constants used by EMC^2 are also stored in this module.</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.instruments.KAZR.html#emc2.core.instruments.KAZR" title="emc2.core.instruments.KAZR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.KAZR</span></code></a>(site[, supercooled])</p></td>
<td><p>This stores the information for the KAZR (Ka-band radar).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.instruments.HSRL.html#emc2.core.instruments.HSRL" title="emc2.core.instruments.HSRL"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.HSRL</span></code></a>(*args)</p></td>
<td><p>This stores the information for 532 nm lidars ,e.g., the High Spectral Resolution Lidar (HSRL), micropulse lidar (MPL).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.instruments.CSAPR.html#emc2.core.instruments.CSAPR" title="emc2.core.instruments.CSAPR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.CSAPR</span></code></a>([supercooled, elevation_angle])</p></td>
<td><p>This stores the information for the ARM CSAPR.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.instruments.NEXRAD.html#emc2.core.instruments.NEXRAD" title="emc2.core.instruments.NEXRAD"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.NEXRAD</span></code></a>([supercooled])</p></td>
<td><p>This stores the information for the NOAA NEXRAD radar Based on  <a class="reference external" href="https://www.roc.noaa.gov/WSR88D/Engineering/NEXRADTechInfo.aspx">https://www.roc.noaa.gov/WSR88D/Engineering/NEXRADTechInfo.aspx</a>.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.instruments.XSACR.html#emc2.core.instruments.XSACR" title="emc2.core.instruments.XSACR"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.XSACR</span></code></a>([supercooled])</p></td>
<td><p>This stores the information for the AMF XSACR.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.instruments.Ten64nm.html#emc2.core.instruments.Ten64nm" title="emc2.core.instruments.Ten64nm"><code class="xref py py-obj docutils literal notranslate"><span class="pre">instruments.Ten64nm</span></code></a>([supercooled])</p></td>
<td><p>This stores the information for the 1064 nm lidars, e.g., the 2-ch HSRL.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.model.ModelE.html#emc2.core.model.ModelE" title="emc2.core.model.ModelE"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.ModelE</span></code></a>(file_path[, time_range, ...])</p></td>
<td><p>This loads a ModelE simulation with all of the necessary parameters for EMC^2 to run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.model.TestModel.html#emc2.core.model.TestModel" title="emc2.core.model.TestModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.TestModel</span></code></a>()</p></td>
<td><p>This is a test Model structure used only for unit testing.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.model.DHARMA.html#emc2.core.model.DHARMA" title="emc2.core.model.DHARMA"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.DHARMA</span></code></a>(file_path[, time_range, ...])</p></td>
<td><p>This loads a DHARMA simulation with all of the necessary parameters for EMC^2 to run.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.model.WRF.html#emc2.core.model.WRF" title="emc2.core.model.WRF"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.WRF</span></code></a>(file_path[, z_range, time_range, ...])</p></td>
<td><p>This load a WRF simulation and all of the necessary parameters from the simulation.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.model.TestConvection.html#emc2.core.model.TestConvection" title="emc2.core.model.TestConvection"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.TestConvection</span></code></a>()</p></td>
<td><p>This is a test Model structure used only for unit testing.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.model.TestAllStratiform.html#emc2.core.model.TestAllStratiform" title="emc2.core.model.TestAllStratiform"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.TestAllStratiform</span></code></a>()</p></td>
<td><p>This is a test Model structure used only for unit testing.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.model.TestHalfAndHalf.html#emc2.core.model.TestHalfAndHalf" title="emc2.core.model.TestHalfAndHalf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.TestHalfAndHalf</span></code></a>()</p></td>
<td><p>This is a test Model structure used only for unit testing.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.model.TestModel.html#emc2.core.model.TestModel" title="emc2.core.model.TestModel"><code class="xref py py-obj docutils literal notranslate"><span class="pre">model.TestModel</span></code></a>()</p></td>
<td><p>This is a test Model structure used only for unit testing.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="generated/emc2.core.Instrument.html#emc2.core.Instrument" title="emc2.core.Instrument"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Instrument</span></code></a>([frequency, wavelength])</p></td>
<td><p>This is the base class which holds the information needed to contain the instrument parameters for the simulator.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="generated/emc2.core.Model.html#emc2.core.Model" title="emc2.core.Model"><code class="xref py py-obj docutils literal notranslate"><span class="pre">Model</span></code></a>()</p></td>
<td><p>This class stores the model specific parameters for the radar simulator.</p></td>
</tr>
</tbody>
</table>
<p>In addition the <code class="xref py py-func docutils literal notranslate"><span class="pre">emc2.core.quantity()</span></code> is equivalent to pint’s
UnitRegistry().Quantity object. This allows for the use of quantities
with units, making EMC^2 unit aware.</p>
</section>
<div class="toctree-wrapper compound">
</div>
<dl class="py class">
<dt class="sig sig-object py" id="emc2.core.Model">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">emc2.core.</span></span><span class="sig-name descname"><span class="pre">Model</span></span><a class="reference internal" href="../_modules/emc2/core/model.html#Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model" title="Link to this definition">¶</a></dt>
<dd><p>This class stores the model specific parameters for the radar simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>Rho_hyd: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the density of said hydrometeors in <span class="math notranslate nohighlight">\(kg\ m^{-3}\)</span></p>
</dd>
<dt><strong>fluffy: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s ice hydrometeor classes and
whose values are the ice fluffiness factor for the fwd calculations using r_e,
where values of 0 - equal volume sphere, 1 - fluffy sphere i.e., diameter = maximum dimension.</p>
</dd>
<dt><strong>lidar_ratio: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the lidar_ratio of said hydrometeors.</p>
</dd>
<dt><strong>vel_param_a: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the <span class="math notranslate nohighlight">\(a\)</span> parameters to the equation <span class="math notranslate nohighlight">\(V = aD^b\)</span> used to
calculate terminal velocity corresponding to each hydrometeor.</p>
</dd>
<dt><strong>vel_param_b: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the <span class="math notranslate nohighlight">\(b\)</span> parameters to the equation <span class="math notranslate nohighlight">\(V = aD^b\)</span> used to
calculate terminal velocity corresponding to each hydrometeor.</p>
</dd>
<dt><strong>N_field: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the number concentrations in <span class="math notranslate nohighlight">\(cm^{-3}\)</span> corresponding to
each hydrometeor class.</p>
</dd>
<dt><strong>T_field: str</strong></dt><dd><p>A string containing the name of the temperature field in the model.</p>
</dd>
<dt><strong>q_field: str</strong></dt><dd><p>A string containing the name of the water vapor mixing ratio field (in kg/kg) in the model.</p>
</dd>
<dt><strong>p_field: str</strong></dt><dd><p>A string containing the name of the pressure field (in mbar) in the model.</p>
</dd>
<dt><strong>z_field: str</strong></dt><dd><p>A string containing the name of the height field (in m) in the model.</p>
</dd>
<dt><strong>conv_frac_names: dict</strong></dt><dd><p>A dictionary containing the names of the convective fraction corresponding to each
hydrometeor class in the model.</p>
</dd>
<dt><strong>strat_frac_names: dict</strong></dt><dd><p>A dictionary containing the names of the stratiform fraction corresponding to each
hydrometeor class in the model.</p>
</dd>
<dt><strong>conv_frac_names_for_rad: dict</strong></dt><dd><p>A dictionary containing the names of the convective fraction corresponding to each
hydrometeor class in the model for the radiation scheme.</p>
</dd>
<dt><strong>strat_frac_names_for_rad: dict</strong></dt><dd><p>A dictionary containing the names of the stratiform fraction corresponding to each
hydrometeor class in the model for the radiation scheme.</p>
</dd>
<dt><strong>conv_re_fields: dict</strong></dt><dd><p>A dictionary containing the names of the effective radii of each convective
hydrometeor class</p>
</dd>
<dt><strong>strat_re_fields: dict</strong></dt><dd><p>A dictionary containing the names of the effective radii of each stratiform
hydrometeor class</p>
</dd>
<dt><strong>asp_ratio_func: dict</strong></dt><dd><p>A dictionary that returns hydrometeor aspect ratios as a function of maximum dimension in mm.</p>
</dd>
<dt><strong>hyd_types: list</strong></dt><dd><p>list of hydrometeor classes to include in calcuations. By default set to be consistent
with the model represented by the Model subclass.</p>
</dd>
<dt><strong>time_dim: str</strong></dt><dd><p>The name of the time dimension in the model.</p>
</dd>
<dt><strong>height_dim: str</strong></dt><dd><p>The name of the height dimension in the model.</p>
</dd>
<dt><strong>lat_dim: str</strong></dt><dd><p>Name of the latitude dimension in the model (relevant for regional output)</p>
</dd>
<dt><strong>lon_dim: str</strong></dt><dd><p>Name of the longitude dimension in the model (relevant for regional output)</p>
</dd>
<dt><strong>mcphys_scheme: str</strong></dt><dd><dl class="simple">
<dt>Name of the microphysics scheme used by the model. Current options are:</dt><dd><ol class="arabic simple">
<li><p>“MG2”, “MG”, “Morrison” - essentially treated the same.</p></li>
<li><p>“NSSL”</p></li>
<li><p>“P3”</p></li>
</ol>
</dd>
</dl>
</dd>
<dt><strong>rad_scheme_family: str</strong></dt><dd><p>Radiation scheme family. Many models share the same radiation scheme or bulk scattering LUT
ancestor (inc. same PSD parameters, ice habit description, etc.). This parameters determines
the single particle or bulk LUT to use given the Model class.</p>
</dd>
<dt><strong>stacked_time_dim: str or None</strong></dt><dd><p>This attribute becomes a string of the original time dimension name only if
stacking was required to enable EMC2 to processes a domain output (time x lat x lon).</p>
</dd>
<dt><strong>process_conv: bool</strong></dt><dd><p>If True, then processing convective model output (can typically be set to False for
some models).</p>
</dd>
<dt><strong>model_name: str</strong></dt><dd><p>The name of the model.</p>
</dd>
<dt><strong>variable_density: dict</strong></dt><dd><p>If the model allows for particle density for vary (e.g. 2-moment NSSL), then
this is a dict pointing to the variable with the density for each hydrometeor class</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.check_and_stack_time_lat_lon">
<span class="sig-name descname"><span class="pre">check_and_stack_time_lat_lon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">out_coord_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'time_lat_lon'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">file_path</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">order_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.check_and_stack_time_lat_lon"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.check_and_stack_time_lat_lon" title="Link to this definition">¶</a></dt>
<dd><p>Stack the time dim together with the lat and lon dims (if the lat and/or lon dims are longer than 1)
to enable EMC^2 processing of regional model output. Otherwise, squeezing the lat and lon dims (if they
exist in dataset). Finally, the method reorder dimensions to time x height for proper processing by
calling the “permute_dims_for_processing” class method.
NOTE: tmp variables for lat, lon, and time are produced as xr.Datasets still have many unresolved bugs
associated with pandas multi-indexing implemented in xarray for stacking (e.g., new GitHub issue #5692).
Practically, after the subcolumn processing the stacking information is lost so an alternative dedicated
method is used for unstacking</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>out_coord_name: str</strong></dt><dd><p>Name of output stacked coordinate.</p>
</dd>
<dt><strong>file_path: str</strong></dt><dd><p>Path and filename of model simulation output.</p>
</dd>
<dt><strong>order_dim: bool</strong></dt><dd><p>When True, reorder dimensions to time x height for proper processing.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.finalize_subcol_fields">
<span class="sig-name descname"><span class="pre">finalize_subcol_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">more_fieldnames</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">[]</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.finalize_subcol_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.finalize_subcol_fields" title="Link to this definition">¶</a></dt>
<dd><p>Remove all zero values from subcolumn output fields enabling better visualization. Can be applied
over additional fields using the more_fieldnames input parameter.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="emc2.core.Model.hydrometeor_classes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">hydrometeor_classes</span></span><a class="headerlink" href="#emc2.core.Model.hydrometeor_classes" title="Link to this definition">¶</a></dt>
<dd><p>The list of hydrometeor classes.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.load_subcolumns_from_netcdf">
<span class="sig-name descname"><span class="pre">load_subcolumns_from_netcdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.load_subcolumns_from_netcdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.load_subcolumns_from_netcdf" title="Link to this definition">¶</a></dt>
<dd><p>Load all of the subcolumn data from a previously saved netCDF file.
The dataset being loaded must match the current number of subcolumns if there are any
generated.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>file_name: str</strong></dt><dd><p>Name of the file to save.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="emc2.core.Model.num_hydrometeor_classes">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_hydrometeor_classes</span></span><a class="headerlink" href="#emc2.core.Model.num_hydrometeor_classes" title="Link to this definition">¶</a></dt>
<dd><p>The number of hydrometeor classes used</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="emc2.core.Model.num_subcolumns">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">num_subcolumns</span></span><a class="headerlink" href="#emc2.core.Model.num_subcolumns" title="Link to this definition">¶</a></dt>
<dd><p>Gets the number of subcolumns in the model. Will
return 0 if the number of subcolumns has not yet been set.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.permute_dims_for_processing">
<span class="sig-name descname"><span class="pre">permute_dims_for_processing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_order</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dim_first</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.permute_dims_for_processing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.permute_dims_for_processing" title="Link to this definition">¶</a></dt>
<dd><p>Reorder dims for consistent processing such that the order is:
subcolumn x time x height.
Note: lat/lon dims are assumed to already be stacked with the time dim.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>base_order: list or None</strong></dt><dd><p>List of preffered dimension order. Use default if None</p>
</dd>
<dt><strong>base_dim_first: bool</strong></dt><dd><p>Make the base dims (height and time) the first ones in the permutation if True.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.remove_appended_str">
<span class="sig-name descname"><span class="pre">remove_appended_str</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">all_appended_in_lat</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.remove_appended_str"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.remove_appended_str" title="Link to this definition">¶</a></dt>
<dd><p>Remove appended strings from xr.Dataset coords and fieldnames based on lat/lon coord names
(typically required when using post-processed output data files).
Note: in the case of E3SM-like machinery output, the method can handle output from multiple
sub-domains assuming there is only a single spatial dimension (typically <cite>ncol</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>all_appended_in_lat: bool</strong></dt><dd><p>If True using only the appended str portion to the lat_dim. Otherwise, combining
the appended str from both the lat and lon dims (relevant if appended_str is True).</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.remove_subcol_fields">
<span class="sig-name descname"><span class="pre">remove_subcol_fields</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cloud_class</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'conv'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.remove_subcol_fields"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.remove_subcol_fields" title="Link to this definition">¶</a></dt>
<dd><p>Remove all subcolumn output fields for the given cloud class to save memory (mainly releveant
for CESM and E3SM).</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.subcolumns_to_netcdf">
<span class="sig-name descname"><span class="pre">subcolumns_to_netcdf</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">file_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.subcolumns_to_netcdf"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.subcolumns_to_netcdf" title="Link to this definition">¶</a></dt>
<dd><p>Saves all of the simulated subcolumn parameters to a netCDF file.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>file_name: str</strong></dt><dd><p>The name of the file to save to.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.unstack_time_lat_lon">
<span class="sig-name descname"><span class="pre">unstack_time_lat_lon</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">order_dim</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">squeeze_single_dims</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/model.html#Model.unstack_time_lat_lon"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.unstack_time_lat_lon" title="Link to this definition">¶</a></dt>
<dd><p>Unstack the time, lat, and lon dims if they were previously stacked together
(self.stacked_time_dim is not None). Finally, the method reorder dimensions to time x height for proper
processing by calling the “permute_dims_for_processing” class method.
Note (relevant for squeeze_single_dims == True):
If the time dimension size is 1, that dimension is squeezed. Similarly, if the number of
subcolumns is 1 (subcolumn generator is turned off), the subcolumn dimension is squeezed as well.
NOTE: This is a dedicated method written because xr.Datasets still have many unresolved bugs
associated with pandas multi-indexing implemented in xarray for stacking (e.g., new GitHub issue #5692).
Practically, after the subcolumn processing the stacking information is lost so this is an alternative
dedicated method.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>order_dim: bool</strong></dt><dd><p>When True, reorder dimensions to subcolumn x time x height for proper processing.</p>
</dd>
<dt><strong>squeeze_single_dims: bool</strong></dt><dd><p>If True, squeezing the time and/or subcolumn dimension(s) if their lengh is 1.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="emc2.core.Instrument">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">emc2.core.</span></span><span class="sig-name descname"><span class="pre">Instrument</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frequency</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wavelength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/instrument.html#Instrument"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Instrument" title="Link to this definition">¶</a></dt>
<dd><p>This is the base class which holds the information needed to contain the instrument parameters for the
simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>instrument_str: str</strong></dt><dd><p>The name of the instrument.</p>
</dd>
<dt><strong>instrument_class: str</strong></dt><dd><p>The class of the instrument. Currently must be one of ‘radar,’ or ‘lidar’.</p>
</dd>
<dt><strong>freq: float</strong></dt><dd><p>The frequency of the instrument.</p>
</dd>
<dt><strong>wavelength: float</strong></dt><dd><p>The wavelength of the instrument</p>
</dd>
<dt><strong>beta_p_phase_thresh: list of dicts or None</strong></dt><dd><p>If a list, each index contains a dictionaly with class name, class integer
value (mask order), LDR value bounds, and the corresponding beta_p threshold
(thresholds are linearly interpolated between LDR values). In order for the
method to operate properly, the list should be arranged from the lowest to
highest beta_p threshold values for a given LDR, that is,
beta_p[i+1 | LDR=x] &gt;= beta_p[i | LDR=x].</p>
</dd>
<dt><strong>ext_OD: float</strong></dt><dd><p>The optical depth where we have full extinction of the lidar signal.</p>
</dd>
<dt><strong>OD_from_sfc: Bool</strong></dt><dd><p>If True (default), optical depth will be calculated from the surface. If False,
optical depth will be calculated from the top of the atmosphere.</p>
</dd>
<dt><strong>eta: float</strong></dt><dd><p>Multiple scattering coefficient.</p>
</dd>
<dt><strong>K_w: float</strong></dt><dd><p>The index of refraction of water used for Ze calculation.
See the ARM KAZR handbook (Widener et al. 2012)</p>
</dd>
<dt><strong>eps_liq: float</strong></dt><dd><p>The complex dielectric constant for liquid water.</p>
</dd>
<dt><strong>pt: float</strong></dt><dd><p>Transmitting power in Watts.</p>
</dd>
<dt><strong>theta: float</strong></dt><dd><p>3 dB beam width in degrees</p>
</dd>
<dt><strong>gain: float</strong></dt><dd><p>The antenna gain in linear units.</p>
</dd>
<dt><strong>Z_min_1km: float</strong></dt><dd><p>The minimum detectable signal at 1 km in dBZ</p>
</dd>
<dt><strong>lr: float</strong></dt><dd><p>Attenuation based on the the general attributes in the spectra files.</p>
</dd>
<dt><strong>pr_noise_ge: float</strong></dt><dd><p>Minimum detectable signal in mW.</p>
</dd>
<dt><strong>tau_ge: float</strong></dt><dd><p>Pulse width in mus.</p>
</dd>
<dt><strong>tau_md: float</strong></dt><dd><p>Pulse width in mus.</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Instrument.read_arm_netcdf_file">
<span class="sig-name descname"><span class="pre">read_arm_netcdf_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">filename</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/emc2/core/instrument.html#Instrument.read_arm_netcdf_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Instrument.read_arm_netcdf_file" title="Link to this definition">¶</a></dt>
<dd><p>Loads a netCDF file that corresponds to ARM standards.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>filename: str</strong></dt><dd></dd>
<dt><strong>Additional keyword arguments are passed into :py:func:`act.io.arm.read_arm_netcdf`</strong></dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</dd></dl>



           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="API Reference" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="generated/emc2.core.instruments.KAZR.html" class="btn btn-neutral float-right" title="emc2.core.instruments.KAZR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bobby Jackson, Israel Silber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>