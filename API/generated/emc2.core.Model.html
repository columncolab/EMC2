

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>emc2.core.Model &mdash; EMC^2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
      <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
      <script defer="defer" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="emc2.io (emc2.io)" href="../io.html" />
    <link rel="prev" title="emc2.core.Instrument" href="emc2.core.Instrument.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EMC^2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">EMC^2 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">EMC^2 Usage guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../EMC2example.html"><em>EMC²</em> Demo Notebook</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../core.html">emc2.core (emc2.core)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.CSAPR.html">emc2.core.instruments.CSAPR</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.XSACR.html">emc2.core.instruments.XSACR</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.KAZR.html">emc2.core.instruments.KAZR</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.WACR.html">emc2.core.instruments.WACR</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.MWACR.html">emc2.core.instruments.MWACR</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.BASTA.html">emc2.core.instruments.BASTA</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.RL.html">emc2.core.instruments.RL</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.HSRL.html">emc2.core.instruments.HSRL</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.MPL.html">emc2.core.instruments.MPL</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.CEIL.html">emc2.core.instruments.CEIL</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.Ten64nm.html">emc2.core.instruments.Ten64nm</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.HSRL1064.html">emc2.core.instruments.HSRL1064</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.NEXRAD.html">emc2.core.instruments.NEXRAD</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.instruments.CALIOP.html">emc2.core.instruments.CALIOP</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.E3SMv1.html">emc2.core.model.E3SMv1</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.E3SMv3.html">emc2.core.model.E3SMv3</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.CESM2.html">emc2.core.model.CESM2</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.ModelE.html">emc2.core.model.ModelE</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.WRF.html">emc2.core.model.WRF</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.DHARMA.html">emc2.core.model.DHARMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.TestConvection.html">emc2.core.model.TestConvection</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.TestAllStratiform.html">emc2.core.model.TestAllStratiform</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.TestHalfAndHalf.html">emc2.core.model.TestHalfAndHalf</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.model.TestModel.html">emc2.core.model.TestModel</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.core.Instrument.html">emc2.core.Instrument</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">emc2.core.Model</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#emc2.core.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#emc2.core.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#emc2.core.Instrument"><code class="docutils literal notranslate"><span class="pre">Instrument</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../io.html">emc2.io (emc2.io)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../simulator.html">emc2.simulator (emc2.simulator)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html">emc2.plotting (emc2.plotting)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html#emc2.plotting.SubcolumnDisplay"><code class="docutils literal notranslate"><span class="pre">SubcolumnDisplay</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EMC^2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../core.html">emc2.core (emc2.core)</a></li>
      <li class="breadcrumb-item active">emc2.core.Model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/API/generated/emc2.core.Model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="emc2-core-model">
<h1>emc2.core.Model<a class="headerlink" href="#emc2-core-model" title="Link to this heading">¶</a></h1>
<dl class="py class">
<dt class="sig sig-object py" id="emc2.core.Model">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">emc2.core.</span></span><span class="sig-name descname"><span class="pre">Model</span></span><a class="reference internal" href="../../_modules/emc2/core/model.html#Model"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model" title="Link to this definition">¶</a></dt>
<dd><p>This class stores the model specific parameters for the radar simulator.</p>
<dl class="field-list simple">
<dt class="field-odd">Attributes<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>Rho_hyd: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the density of said hydrometeors in <span class="math notranslate nohighlight">\(kg\ m^{-3}\)</span></p>
</dd>
<dt><strong>fluffy: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s ice hydrometeor classes and
whose values are the ice fluffiness factor for the fwd calculations using r_e,
where values of 0 - equal volume sphere, 1 - fluffy sphere i.e., diameter = maximum dimension.</p>
</dd>
<dt><strong>lidar_ratio: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the lidar_ratio of said hydrometeors.</p>
</dd>
<dt><strong>vel_param_a: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the <span class="math notranslate nohighlight">\(a\)</span> parameters to the equation <span class="math notranslate nohighlight">\(V = aD^b\)</span> used to
calculate terminal velocity corresponding to each hydrometeor.</p>
</dd>
<dt><strong>vel_param_b: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the <span class="math notranslate nohighlight">\(b\)</span> parameters to the equation <span class="math notranslate nohighlight">\(V = aD^b\)</span> used to
calculate terminal velocity corresponding to each hydrometeor.</p>
</dd>
<dt><strong>N_field: dict</strong></dt><dd><p>A dictionary whose keys are the names of the model’s hydrometeor classes and
whose values are the number concentrations in <span class="math notranslate nohighlight">\(cm^{-3}\)</span> corresponding to
each hydrometeor class.</p>
</dd>
<dt><strong>T_field: str</strong></dt><dd><p>A string containing the name of the temperature field in the model.</p>
</dd>
<dt><strong>q_field: str</strong></dt><dd><p>A string containing the name of the water vapor mixing ratio field (in kg/kg) in the model.</p>
</dd>
<dt><strong>p_field: str</strong></dt><dd><p>A string containing the name of the pressure field (in mbar) in the model.</p>
</dd>
<dt><strong>z_field: str</strong></dt><dd><p>A string containing the name of the height field (in m) in the model.</p>
</dd>
<dt><strong>conv_frac_names: dict</strong></dt><dd><p>A dictionary containing the names of the convective fraction corresponding to each
hydrometeor class in the model.</p>
</dd>
<dt><strong>strat_frac_names: dict</strong></dt><dd><p>A dictionary containing the names of the stratiform fraction corresponding to each
hydrometeor class in the model.</p>
</dd>
<dt><strong>conv_frac_names_for_rad: dict</strong></dt><dd><p>A dictionary containing the names of the convective fraction corresponding to each
hydrometeor class in the model for the radiation scheme.</p>
</dd>
<dt><strong>strat_frac_names_for_rad: dict</strong></dt><dd><p>A dictionary containing the names of the stratiform fraction corresponding to each
hydrometeor class in the model for the radiation scheme.</p>
</dd>
<dt><strong>conv_re_fields: dict</strong></dt><dd><p>A dictionary containing the names of the effective radii of each convective
hydrometeor class</p>
</dd>
<dt><strong>strat_re_fields: dict</strong></dt><dd><p>A dictionary containing the names of the effective radii of each stratiform
hydrometeor class</p>
</dd>
<dt><strong>asp_ratio_func: dict</strong></dt><dd><p>A dictionary that returns hydrometeor aspect ratios as a function of maximum dimension in mm.</p>
</dd>
<dt><strong>hyd_types: list</strong></dt><dd><p>list of hydrometeor classes to include in calcuations. By default set to be consistent
with the model represented by the Model subclass.</p>
</dd>
<dt><strong>time_dim: str</strong></dt><dd><p>The name of the time dimension in the model.</p>
</dd>
<dt><strong>height_dim: str</strong></dt><dd><p>The name of the height dimension in the model.</p>
</dd>
<dt><strong>lat_dim: str</strong></dt><dd><p>Name of the latitude dimension in the model (relevant for regional output)</p>
</dd>
<dt><strong>lon_dim: str</strong></dt><dd><p>Name of the longitude dimension in the model (relevant for regional output)</p>
</dd>
<dt><strong>mcphys_scheme: str</strong></dt><dd><dl class="simple">
<dt>Name of the microphysics scheme used by the model. Current options are:</dt><dd><ol class="arabic simple">
<li><p>“MG2”, “MG”, “Morrison” - essentially treated the same.</p></li>
<li><p>“NSSL”</p></li>
<li><p>“P3”</p></li>
</ol>
</dd>
</dl>
</dd>
<dt><strong>rad_scheme_family: str</strong></dt><dd><p>Radiation scheme family. Many models share the same radiation scheme or bulk scattering LUT
ancestor (inc. same PSD parameters, ice habit description, etc.). This parameters determines
the single particle or bulk LUT to use given the Model class.</p>
</dd>
<dt><strong>stacked_time_dim: str or None</strong></dt><dd><p>This attribute becomes a string of the original time dimension name only if
stacking was required to enable EMC2 to processes a domain output (time x lat x lon).</p>
</dd>
<dt><strong>process_conv: bool</strong></dt><dd><p>If True, then processing convective model output (can typically be set to False for
some models).</p>
</dd>
<dt><strong>model_name: str</strong></dt><dd><p>The name of the model.</p>
</dd>
<dt><strong>variable_density: dict</strong></dt><dd><p>If the model allows for particle density for vary (e.g. 2-moment NSSL), then
this is a dict pointing to the variable with the density for each hydrometeor class</p>
</dd>
</dl>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="emc2.core.Model.__init__">
<span class="sig-name descname"><span class="pre">__init__</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emc2/core/model.html#Model.__init__"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.core.Model.__init__" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<p class="rubric">Methods</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="#emc2.core.Model.__init__" title="emc2.core.Model.__init__"><code class="xref py py-obj docutils literal notranslate"><span class="pre">__init__</span></code></a>()</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.check_and_stack_time_lat_lon" title="emc2.core.Model.check_and_stack_time_lat_lon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">check_and_stack_time_lat_lon</span></code></a>([...])</p></td>
<td><p>Stack the time dim together with the lat and lon dims (if the lat and/or lon dims are longer than 1) to enable EMC^2 processing of regional model output.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.finalize_subcol_fields" title="emc2.core.Model.finalize_subcol_fields"><code class="xref py py-obj docutils literal notranslate"><span class="pre">finalize_subcol_fields</span></code></a>([more_fieldnames])</p></td>
<td><p>Remove all zero values from subcolumn output fields enabling better visualization.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.load_subcolumns_from_netcdf" title="emc2.core.Model.load_subcolumns_from_netcdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">load_subcolumns_from_netcdf</span></code></a>(file_name)</p></td>
<td><p>Load all of the subcolumn data from a previously saved netCDF file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.permute_dims_for_processing" title="emc2.core.Model.permute_dims_for_processing"><code class="xref py py-obj docutils literal notranslate"><span class="pre">permute_dims_for_processing</span></code></a>([base_order, ...])</p></td>
<td><p>Reorder dims for consistent processing such that the order is: subcolumn x time x height.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.remove_appended_str" title="emc2.core.Model.remove_appended_str"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_appended_str</span></code></a>([all_appended_in_lat])</p></td>
<td><p>Remove appended strings from xr.Dataset coords and fieldnames based on lat/lon coord names (typically required when using post-processed output data files).</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.remove_subcol_fields" title="emc2.core.Model.remove_subcol_fields"><code class="xref py py-obj docutils literal notranslate"><span class="pre">remove_subcol_fields</span></code></a>([cloud_class])</p></td>
<td><p>Remove all subcolumn output fields for the given cloud class to save memory (mainly releveant for CESM and E3SM).</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.set_array_to_valid_range" title="emc2.core.Model.set_array_to_valid_range"><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_array_to_valid_range</span></code></a>(arr_in, grid_in)</p></td>
<td><p>Adjusts the values in the input array to ensure they fall within the valid range defined by the minimum and maximum values of the grid array.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="xref py py-obj docutils literal notranslate"><span class="pre">set_hyd_types</span></code>(hyd_types)</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.subcolumns_to_netcdf" title="emc2.core.Model.subcolumns_to_netcdf"><code class="xref py py-obj docutils literal notranslate"><span class="pre">subcolumns_to_netcdf</span></code></a>(file_name)</p></td>
<td><p>Saves all of the simulated subcolumn parameters to a netCDF file.</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.unstack_time_lat_lon" title="emc2.core.Model.unstack_time_lat_lon"><code class="xref py py-obj docutils literal notranslate"><span class="pre">unstack_time_lat_lon</span></code></a>([order_dim, ...])</p></td>
<td><p>Unstack the time, lat, and lon dims if they were previously stacked together (self.stacked_time_dim is not None).</p></td>
</tr>
</tbody>
</table>
<p class="rubric">Attributes</p>
<table class="autosummary longtable docutils align-default">
<tbody>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.hydrometeor_classes" title="emc2.core.Model.hydrometeor_classes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">hydrometeor_classes</span></code></a></p></td>
<td><p>The list of hydrometeor classes.</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.num_hydrometeor_classes" title="emc2.core.Model.num_hydrometeor_classes"><code class="xref py py-obj docutils literal notranslate"><span class="pre">num_hydrometeor_classes</span></code></a></p></td>
<td><p>The number of hydrometeor classes used</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="../core.html#emc2.core.Model.num_subcolumns" title="emc2.core.Model.num_subcolumns"><code class="xref py py-obj docutils literal notranslate"><span class="pre">num_subcolumns</span></code></a></p></td>
<td><p>Gets the number of subcolumns in the model.</p></td>
</tr>
</tbody>
</table>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="emc2.core.Instrument.html" class="btn btn-neutral float-left" title="emc2.core.Instrument" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../io.html" class="btn btn-neutral float-right" title="emc2.io (emc2.io)" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bobby Jackson, Israel Silber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>