

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>emc2.simulator.radar_moments.calc_radar_moments &mdash; EMC^2  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery.css?v=d2d258e8" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-binder.css?v=f4aeca0c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-dataframe.css?v=2082cf3c" />
      <link rel="stylesheet" type="text/css" href="../../_static/sg_gallery-rendered-html.css?v=1277b6f3" />

  
      <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="emc2.simulator.lidar_moments.calc_total_alpha_beta" href="emc2.simulator.lidar_moments.calc_total_alpha_beta.html" />
    <link rel="prev" title="emc2.simulator.radar_moments.calc_radar_micro" href="emc2.simulator.radar_moments.calc_radar_micro.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            EMC^2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../installation.html">EMC^2 Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../usage/index.html">EMC^2 Usage guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../EMC2example.html"><em>EMC²</em> Demo Notebook</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../index.html">API Reference</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../core.html">emc2.core (emc2.core)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#emc2.core.Model"><code class="docutils literal notranslate"><span class="pre">Model</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../core.html#emc2.core.Instrument"><code class="docutils literal notranslate"><span class="pre">Instrument</span></code></a></li>
<li class="toctree-l2"><a class="reference internal" href="../io.html">emc2.io (emc2.io)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../simulator.html">emc2.simulator (emc2.simulator)</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.attenuation.calc_radar_atm_attenuation.html">emc2.simulator.attenuation.calc_radar_atm_attenuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.attenuation.calc_theory_beta_m.html">emc2.simulator.attenuation.calc_theory_beta_m</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.attenuation.calc_radar_Ze_min.html">emc2.simulator.attenuation.calc_radar_Ze_min</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.classification.lidar_classify_phase.html">emc2.simulator.classification.lidar_classify_phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.classification.radar_classify_phase.html">emc2.simulator.classification.radar_classify_phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.classification.lidar_emulate_cosp_phase.html">emc2.simulator.classification.lidar_emulate_cosp_phase</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.classification.calculate_phase_ratio.html">emc2.simulator.classification.calculate_phase_ratio</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.psd.calc_mu_lambda.html">emc2.simulator.psd.calc_mu_lambda</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.psd.calc_velocity_nssl.html">emc2.simulator.psd.calc_velocity_nssl</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.radar_moments.calc_total_reflectivity.html">emc2.simulator.radar_moments.calc_total_reflectivity</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.radar_moments.accumulate_attenuation.html">emc2.simulator.radar_moments.accumulate_attenuation</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.radar_moments.calc_radar_empirical.html">emc2.simulator.radar_moments.calc_radar_empirical</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.radar_moments.calc_radar_bulk.html">emc2.simulator.radar_moments.calc_radar_bulk</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.radar_moments.calc_radar_micro.html">emc2.simulator.radar_moments.calc_radar_micro</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">emc2.simulator.radar_moments.calc_radar_moments</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#emc2.simulator.radar_moments.calc_radar_moments"><code class="docutils literal notranslate"><span class="pre">calc_radar_moments()</span></code></a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_total_alpha_beta.html">emc2.simulator.lidar_moments.calc_total_alpha_beta</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_LDR_and_ext.html">emc2.simulator.lidar_moments.calc_LDR_and_ext</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.accumulate_OD.html">emc2.simulator.lidar_moments.accumulate_OD</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_lidar_empirical.html">emc2.simulator.lidar_moments.calc_lidar_empirical</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_lidar_bulk.html">emc2.simulator.lidar_moments.calc_lidar_bulk</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_lidar_micro.html">emc2.simulator.lidar_moments.calc_lidar_micro</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.lidar_moments.calc_lidar_moments.html">emc2.simulator.lidar_moments.calc_lidar_moments</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.main.make_simulated_data.html">emc2.simulator.main.make_simulated_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.subcolumn.set_convective_sub_col_frac.html">emc2.simulator.subcolumn.set_convective_sub_col_frac</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.subcolumn.set_stratiform_sub_col_frac.html">emc2.simulator.subcolumn.set_stratiform_sub_col_frac</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.subcolumn.set_precip_sub_col_frac.html">emc2.simulator.subcolumn.set_precip_sub_col_frac</a></li>
<li class="toctree-l3"><a class="reference internal" href="emc2.simulator.subcolumn.set_q_n.html">emc2.simulator.subcolumn.set_q_n</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html">emc2.plotting (emc2.plotting)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plotting.html#emc2.plotting.SubcolumnDisplay"><code class="docutils literal notranslate"><span class="pre">SubcolumnDisplay</span></code></a></li>
</ul>
</li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">EMC^2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../index.html">API Reference</a></li>
          <li class="breadcrumb-item"><a href="../simulator.html">emc2.simulator (emc2.simulator)</a></li>
      <li class="breadcrumb-item active">emc2.simulator.radar_moments.calc_radar_moments</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/API/generated/emc2.simulator.radar_moments.calc_radar_moments.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="emc2-simulator-radar-moments-calc-radar-moments">
<h1>emc2.simulator.radar_moments.calc_radar_moments<a class="headerlink" href="#emc2-simulator-radar-moments-calc-radar-moments" title="Link to this heading">¶</a></h1>
<dl class="py function">
<dt class="sig sig-object py" id="emc2.simulator.radar_moments.calc_radar_moments">
<span class="sig-prename descclassname"><span class="pre">emc2.simulator.radar_moments.</span></span><span class="sig-name descname"><span class="pre">calc_radar_moments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">instrument</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">model</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">is_conv</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">OD_from_sfc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hyd_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parallel</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">chunk</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mie_for_ice</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_rad_logic</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_empiric_calc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calc_spectral_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../../_modules/emc2/simulator/radar_moments.html#calc_radar_moments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#emc2.simulator.radar_moments.calc_radar_moments" title="Link to this definition">¶</a></dt>
<dd><p>Calculates the reflectivity, doppler velocity, and spectral width
in a given column for the given radar.</p>
<p>NOTE:
When starting a parallel task (in microphysics approach), it is recommended
to wrap the top-level python script calling the EMC^2 processing (‘lines_of_code’)
with the following command (just below the ‘import’ statements):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="err">“</span><span class="n">__main__</span><span class="err">”</span><span class="p">:</span>
    <span class="n">lines_of_code</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>instrument: Instrument</strong></dt><dd><p>The instrument to simulate. The instrument must be a radar.</p>
</dd>
<dt><strong>model: Model</strong></dt><dd><p>The model to generate the parameters for.</p>
</dd>
<dt><strong>is_conv: bool</strong></dt><dd><p>True if the cell is convective</p>
</dd>
<dt><strong>z_field: str</strong></dt><dd><p>The name of the altitude field to use.</p>
</dd>
<dt><strong>OD_from_sfc: bool</strong></dt><dd><p>If True, then calculate optical depth from the surface.</p>
</dd>
<dt><strong>hyd_types: list or None</strong></dt><dd><p>list of hydrometeor names to include in calculation. using default Model subclass types if None.</p>
</dd>
<dt><strong>parallel: bool</strong></dt><dd><p>If True, then use parallelism to calculate each column quantity.</p>
</dd>
<dt><strong>chunk: None or int</strong></dt><dd><p>If using parallel processing, only send this number of time periods to the
parallel loop at one time. Sometimes Dask will crash if there are too many
tasks in the queue, so setting this value will help avoid that.</p>
</dd>
<dt><strong>calc_spectral_width: bool</strong></dt><dd><p>If False, skips spectral width calculations since these are not always needed for an application
and are the most computationally expensive. Default is True.</p>
</dd>
<dt><strong>mie_for_ice: bool</strong></dt><dd><p>If True, using bulk LUTs generated using solid ice spheres (Mie) calculations (e.g., consistent
with the ice treatment in MG1 through MG2).
Otherwise, using bulk LUTs that consider ice properties, e.g., the C6 8-column severly roughned
aggregate for E3 or the m-D A-D for CESM and E3SMv1, consistent with the radiation schemes of
these models.
This parameter is set to <cite>False</cite> if <cite>mcphys_scheme == P3</cite> since ice shape is integrated into P3,
which also affects mu, etc. and therefore the bulk LUT behavior in a similar manner to how the P3
LUTs are integrated into EMC².</p>
</dd>
<dt><strong>use_rad_logic: bool</strong></dt><dd><p>When True using radiation scheme logic in calculations, which includes using
the cloud fraction fields utilized in a model radiative scheme, as well as bulk
scattering LUTs (effective radii dependent scattering variables). Otherwise, and
only in the stratiform case, using the microphysics scheme logic, which includes
the cloud fraction fields utilized by the model microphysics scheme and single
particle scattering LUTs.
NOTE: because of its single-particle calculation method, the microphysics
approach is significantly slower than the radiation approach. Also, the cloud
fraction logic in these schemes does not necessarily fully overlap.</p>
</dd>
<dt><strong>use_empirical_calc: bool</strong></dt><dd><p>When True using empirical relations from literature for the fwd calculations
(the cloud fraction still follows the scheme logic set by use_rad_logic).</p>
</dd>
<dt><strong>Additonal keyword arguments are passed into</strong></dt><dd></dd>
<dt><strong>:py:func:`emc2.simulator.psd.calc_mu_lambda`.</strong></dt><dd></dd>
<dt><strong>:py:func:`emc2.simulator.lidar_moments.accumulate_attenuation`.</strong></dt><dd></dd>
<dt><strong>:py:func:`emc2.simulator.lidar_moments.calc_radar_empirical`.</strong></dt><dd></dd>
<dt><strong>:py:func:`emc2.simulator.lidar_moments.calc_radar_bulk`.</strong></dt><dd></dd>
<dt><strong>:py:func:`emc2.simulator.lidar_moments.calc_radar_micro`.</strong></dt><dd></dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>model: <a class="reference internal" href="emc2.core.Model.html#emc2.core.Model" title="emc2.core.Model"><code class="xref py py-func docutils literal notranslate"><span class="pre">emc2.core.Model()</span></code></a></dt><dd><p>The xarray Dataset containing the calculated radar moments.</p>
</dd>
</dl>
</dd>
</dl>
</dd></dl>

</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="emc2.simulator.radar_moments.calc_radar_micro.html" class="btn btn-neutral float-left" title="emc2.simulator.radar_moments.calc_radar_micro" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="emc2.simulator.lidar_moments.calc_total_alpha_beta.html" class="btn btn-neutral float-right" title="emc2.simulator.lidar_moments.calc_total_alpha_beta" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021, Bobby Jackson, Israel Silber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>